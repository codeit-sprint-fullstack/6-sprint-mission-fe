<!DOCTYPE html>
<html lang="ko">
<head>
    <title>판다마켓</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="userdata.js"></script>
</head>

<body>
    <div class="display-login">
        <div class="main-login">
                <a class="login-logo" style="text-decoration: none;"href="index.html">
                    <img id="login-logo" src="image/logo.png">
                    <p id="login-title">판다마켓</p>
                </a>
            <label for="email-input">이메일</label>
            <div class="input-container">
                <input
                    id="email-input"
                    placeholder="이메일을 입력해주세요"
                    required
                >
                <p class="error-message" id="email-error"></p>
            </div>
            <label for="nickname-input">닉네임</label>
            <div class="input-container">
                <input
                    id="nickname-input"
                    placeholder="닉네임을 입력해주세요"
                    required
                >
                <p class="error-message" id="nickname-error"></p>
            </div>
            <label for="password-input">비밀번호</label>
            <div class="input-container">
                <input
                    id="password-input"
                    placeholder="비밀번호를 입력해주세요"
                    required
                    type="password"
                >
                <i class="fas fa-eye toggle-password" onclick="togglePassword('password-input', this)"></i>
                <p class="error-message" id="password-error"></p>
            </div>
            <label for="againpassword-input">비밀번호 확인</label>
            <div class="input-container">
                <input
                    id="againpassword-input"
                    placeholder="비밀번호를 다시 한번 입력해주세요"
                    required
                    type="password"
                >
                <i class="fas fa-eye toggle-password" onclick="togglePassword('againpassword-input', this)"></i>
                <p class="error-message" id="againpassword-error"></p>
            </div>
            <button id="login-button">회원가입</button>
            <div class="simple-login">
                <p>간편로그인 하기</p>
                <div class="simple-login-img">
                    <a class="simple-img" href="https://www.google.com/">
                        <img id="google" src="image/Component 2.png">
                    </a>
                    <a class="simple-img" href="https://www.kakaocorp.com/page/">
                        <img id="kakao" src="image/Component 3.png">
                    </a>
                </div>
            </div>
            <p>이미 회원이신가요? <a id="signin-link" href="login.html">로그인</a></p>
        </div>
    </div>
    <div class="overlay" id="overlay"></div>
    <div class="custom-alert" id="custom-alert">
        <p id="confirm-error"></p>
        <button onclick="closeAlert()">확인</button>
    </div>
    <script>
        
        const emailInput = document.getElementById("email-input")
        const nicknameInput = document.getElementById("nickname-input")
        const passwordInput = document.getElementById("password-input")
        const againpasswordInput = document.getElementById("againpassword-input")
        const loginButton = document.getElementById("login-button")

        let emailCheck = false
        let nicknameCheck = false
        let passwordCheck = false
        let againpasswordCheck = false

        
        
        function checkInputs(){
            if (emailCheck && nicknameCheck && passwordCheck && againpasswordCheck){
                loginButton.classList.add("active")
            }
            else{
                loginButton.classList.remove("active")
            }
        }


        function showAlert(){
            let user = USER_DATA.find(user=>user.email === emailInput.value)
            if (user){
                document.getElementById('confirm-error').textContent = "사용 중인 이메일입니다."
                document.getElementById("custom-alert").style.display = "block";
                document.getElementById("overlay").style.display = "block";

            }
            else {
                // console.log(emailInput.value)
                // console.log(passwordInput.value)
                // console.log(USER_DATA)
                // USER_DATA.push({"email": emailInput.value, "password": passwordInput.value})
                // console.log(USER_DATA)
                window.location.href="items.html"
                
                
            }
            
        }
        function closeAlert() {
            document.getElementById("custom-alert").style.display = "none";
            document.getElementById("overlay").style.display = "none";
        }
        loginButton.addEventListener("click", showAlert)


        emailInput.addEventListener("focusout", checkEmail);
        nicknameInput.addEventListener("focusout", checkNickname);
        passwordInput.addEventListener("focusout", checkPassword);
        againpasswordInput.addEventListener("focusout", checkAgainPassword);
    </script>
</body>
</html>